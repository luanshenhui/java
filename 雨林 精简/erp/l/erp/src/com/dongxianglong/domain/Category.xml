<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dongxianglong.domain.Category">

     <resultMap type="Category" id="map01">
     <id property="id" column="cid"/>
     <result property="code" column="cc" />
     <result property="name" column="cname"/>
     <result property="info" column="cinfo"/>
     <collection property="list" javaType="Product">
     <result property="id" column="pid" />
     <result property="code" column="pcode" />
     <result property="name" column="pname"/>
     <result property="info" column="pinfo"/>
     <result property="price" column="pprice"/>
     </collection>
     
     </resultMap>
     <!-- 查询所有类别 -->
     <select id="all" resultMap="map01">
     select c.id cid,c.code cc,c.name cname,c.info cinfo,
            p.id pid,p.code pcode,p.name pname,p.info pinfo,p.price pprice
     from category c,product p
     where c.id=p.cid(+)
     </select>
     <!-- 查询单个类别 -->
     <select id="one" parameterType="_long" resultMap="map01">
     select c.id cid,c.code cc,c.name cname,c.info cinfo,
            p.id pid,p.code pcode,p.name pname,p.info pinfo,p.price pprice
     from category c,product p
     where c.id=p.cid(+) and c.id=#{id}
     </select>
     
     <!-- 增添类别 -->
     <insert id="add" parameterType="Category">
     insert into category values(#{id},#{code},#{name},#{info})
     </insert>
     <!-- 删除类别 -->
     <delete id="delete" parameterType="_long">
     delete from category where id=#{id}
     </delete>
     <!-- 修改 -->
<update id="update" parameterType="Category">
update category
set code=#{code},name=#{name},info=#{info} 
where id=#{id}
</update>     
    

</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dongxianglong.domain.Repertory">
<resultMap type="Repertory" id="map01">
<id property="id" column="rid"/>
<result property="storage" column="rstorage"/>
<association property="product" javaType="Product">
<result property="id" column="ptid"/>
<result property="code" column="ptcode"/>
<result property="name" column="ptname"/>
<result property="price" column="ptprice"/>
<result property="info" column="ptinfo"/>
</association>
</resultMap>


<!-- 增 -->
<insert id="add" parameterType="Sell">
insert into sell values(#{id},#{product.code},#{storage})
</insert>

<!-- 查所有 -->
<select id="all" resultMap="map01">
select r.id rid,r.storage rstorage,
pt.id ptid,pt.code ptcode,pt.name ptname,pt.price ptprice,pt.info ptinfo
from repertory r,product pt
where r.productcode=pt.code
</select>


</mapper>
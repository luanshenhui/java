<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lsh.domain.Stock">

	<resultMap type="Stock" id="map0">
			<id property="id" column="sid"/>
			<result property="stockdate" column="sstockdate"/>
			<result property="stockmount" column="sstockmount"/>
			<result property="moneysum" column="smoneysum"/>
			<association property="person" javaType="Person">
			<result property="username" column="pusername"/>
			<result property="age" column="page"/>		
			<result property="email" column="pemail"/>		
			<result property="password" column="ppassword"/>		
			<result property="sex" column="psex"/>		
			<result property="salary" column="psalary"/>
			<result property="phone" column="pphone"/>
			</association> 
				<association property="product" javaType="Product">
					<result property="name" column="pdname"/>
					<result property="price" column="pdprice"/>
					<result property="info" column="pdinfo"/>
				</association>
	</resultMap> 
	
<!--查询所有	-->
	<select id="all" resultMap="map0">
	 select s.id sid,s.stockdate sstockdate,s.stockmount sstockmount,s.moneysum smoneysum,p.username pusername,p.salary psalary,p.phone pphone,pd.name pdname,pd.price pdprice,pd.info pdinfo,
	 		p.age page ,p.email pemail,p.password ppassword,p.sex psex
			from stock s,person p,product pd
			where p.id=s.personid and pd.code=s.productcode
		
	</select>
<!--查询一个	-->
<select id="getID" parameterType="_long" resultMap="map0">
		  select s.id sid,s.personid spersonid,s.stockdate sstockdate,s.stockmount sstockmount,s.moneysum smoneysum,
         p.id pid,p.username pusername,p.salary psalary,p.phone pphone,pd.name pdname,pd.price pdprice,pd.info pdinfo,p.age page
         ,p.email pemail,p.password ppassword,p.sex psex
		from stock s,person p,product pd
		where p.id=s.personid and pd.code=s.productcode
		where s.id=#{id}
</select>

<!--增加一个	-->
<insert id="add">
	insert into stock
	values (#{id},#{personid},#{productcode}, to_char(sysdate,'yyyy-mm-dd-HH-MI-SS'),#{stockmount},#{moneysum})
</insert>
	


<!-- 修改-->
<update id="update" parameterType="stock">
	update stock
	set personid=#{personid},productcode=#{productcode},stockdate= to_char(sysdate,'yyyy-mm-dd-HH-MI-SS'),stockmount=#{stockmount},moneysum=#{moneysum}
	where id=#{id}
</update>


<delete id="delete" parameterType="_long">
	delete from sell where id=#{id}
</delete>
</mapper>
<!--			<result property="person.id" column="spersonid"/>-->
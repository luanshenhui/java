<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lsh.domain.Sell">

	<resultMap type="Sell" id="map0">
			<id property="id" column="sid"/>
			<result property="selldate" column="sselldate"/>
			<result property="sellmount" column="ssellmount"/>
			<result property="moneysum" column="smoneysum"/>
			<association property="person" javaType="Person">
				<result property="username" column="pusername"/>
				<result property="salary" column="psalary"/>
				<result property="sex" column="psex"/>
				<result property="age" column="page"/>
				<result property="email" column="pemail"/>
				<result property="password" column="ppassword"/>
				<result property="phone" column="pphone"/>
			</association> 
				<association property="product" javaType="Product">
					<result property="name" column="pdname"/>
					<result property="price" column="pdprice"/>
					<result property="info" column="pdinfo"/>
				</association>
	</resultMap> 
	
<!--查询所有	-->
	<select id="all" resultMap="map0">
	 select s.id sid,s.selldate sselldate,s.sellmount ssellmount,s.moneysum smoneysum,p.username pusername,p.salary psalary,p.phone pphone,pd.name pdname,pd.price pdprice,pd.info pdinfo
	 		,p.sex psex,p.age page,p.email pemail,p.password ppassword
			from sell s,person p,product pd
			where p.id=s.personid and pd.code=s.productcode
		
	</select>
<!--查询一个	-->
<select id="getID" parameterType="_long" resultMap="map0">
		  select s.id sid,s.personid spersonid,s.selldate sselldate,s.sellmount ssellmount,s.moneysum smoneysum,
         p.id pid,p.username pusername,p.salary psalary,p.phone pphone,pd.name pdname,pd.price pdprice,pd.info pdinfo
		,p.sex psex,p.age page,p.email pemail,p.password ppassword
		from sell s,person p,product pd
		where p.id=s.personid and pd.code=s.productcode
		where s.id=#{id}
</select>

<!--增加一个	-->
<insert id="add">
	insert into sell
	values (#{id},#{personid},#{productcode}, to_char(sysdate,'yyyy-mm-dd-HH24-MI-SS'),#{sellmount},#{moneysum})
</insert>
	


<!-- 修改-->
<update id="update" parameterType="sell">
	update sell
	set personid=#{personid},productcode=#{productcode},selldate= to_char(sysdate,'yyyy-mm-dd-HH24-MI-SS'),sellmount=#{sellmount},moneysum=#{moneysum}
	where id=#{id}
</update>


<delete id="delete" parameterType="_long">
	delete from sell where id=#{id}
</delete>
</mapper>
<!--			<result property="person.id" column="spersonid"/>-->
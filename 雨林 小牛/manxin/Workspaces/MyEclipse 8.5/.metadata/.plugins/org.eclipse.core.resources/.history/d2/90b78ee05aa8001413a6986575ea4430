<%@ page language="java" import="java.util.*" pageEncoding="utf-8" contentType="text/html; charset=utf-8"%>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  	
    <title>My JSP 'regist.jsp' starting page</title>
	<script type="text/javascript" src="js/my.js"></script>
	<script type="text/javascript" src="js/prototype-1.6.0.3.js"></script>
	<script type="text/javascript">
	function check_username(){
		var xhr = getXhr();
		var uri = 'check_username.do;
		xhr.open('post',uri,true);
		xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');
		xhr.onreadystatechange = function(){
			if(xhr.readyState == 4){
				if(xhr.status == 200){
					var txt = xhr.responseText;
					$('username_msg').innerHTML = txt;
				}else{
					$('username_msg').innerHTML = '检查出错...';
				}
			}
		};
		$('username_msg').innerHTML = '正在检查....';
		xhr.send('username=' + $F('username'));
	}
	</script>

  </head>
  
  <body style="font-size: 30px; font-style: italic;">
    <form action="regist.do" method="post">
    	<fieldset>
    		<legend>注册</legend>
    		用户名:<input id="username" name="username" onblur="check_username();"/>
    		<span style="color: red" class="tips" id="username_msg">${regist_error }</span>
    		<br/>
    		密码:<input type="password" name="pwd"/><br/>
    		<input type="submit" value="提交">
    	</fieldset>
    </form>
  </body>
</html>

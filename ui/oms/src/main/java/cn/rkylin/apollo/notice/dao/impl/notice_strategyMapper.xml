<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.rkylin.apollo.notice.dao.impl.noticeStrategy">
	<sql id="columns">ID,USER_ACCOUNT,IMOORYANT_TYPE_CODE,NOTICE_TIME,NOTICE_TYPE_ID,STRATEGY_TYPE,STATE,CREATE_USER,DATE_FORMAT(CREATE_TIME,'%Y-%m-%d
		%T') AS CREATE_TIME,UPDATE_USER,DATE_FORMAT(UPDATE_TIME,'%Y-%m-%d %T') AS UPDATE_TIME</sql>
	<sql id="tableName">t_notice_strategy</sql>

	<select id="findNoticeStrategyByWhere" resultType="java.util.Map" conn="nm">
		select
		<include refid="columns" />
		from
		<include refid="tableName" />
		t
		where 1=1
		<if test="null != userAccount and '' != userAccount">
			and t.USER_ACCOUNT = #{userAccount}
		</if>
		<if test="null != imooryantTypeCode and '' != imooryantTypeCode">
			and t.IMOORYANT_TYPE_CODE = #{imooryantTypeCode}
		</if>
		<if test="null != id and '' != id">
			and t.ID = #{id}
		</if>
	</select>

	<insert id="inserNoticeStrategy" parameterType="cn.rkylin.core.ApolloMap" conn="nm">
		insert into
		<include refid="tableName" />
		(USER_ACCOUNT,IMOORYANT_TYPE_CODE,NOTICE_TIME,NOTICE_TYPE_ID,STRATEGY_TYPE,STATE,CREATE_USER,CREATE_TIME)
		VALUES(#{userAccount},#{imooryantTypeCode},#{noticeTime},#{noticeTypeId},#{strategyType},#{state},#{createUser},now())
	</insert>

	<update id="updateNoticeStrategy" parameterType="cn.rkylin.core.ApolloMap" conn="nm">
		update
		<include refid="tableName" />
		set USER_ACCOUNT = #{userAccount},
		IMOORYANT_TYPE_CODE = #{imooryantTypeCode},NOTICE_TIME =
		#{noticeTime},NOTICE_TYPE_ID = #{noticeTypeId},STRATEGY_TYPE = #{strategyType},
		STSATE = #{stsate},UPDATE_USER =
		#{updateUser}, UPDATE_TIME = now()
		where ID = #{id}
	</update>
</mapper>

package cn.rkylin.oms.system.role.service;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.github.pagehelper.PageInfo;

import cn.rkylin.core.service.ApolloService;
import cn.rkylin.oms.system.menu.dao.IMenuDAO;
import cn.rkylin.oms.system.menu.domain.WF_ORG_MENU;
import cn.rkylin.oms.system.position.dao.IPositionDAO;
import cn.rkylin.oms.system.position.domain.WF_ORG_STATION;
import cn.rkylin.oms.system.role.dao.IRoleDAO;
import cn.rkylin.oms.system.role.domain.WF_ORG_ROLE;
import cn.rkylin.oms.system.role.vo.RoleVo;
import cn.rkylin.oms.system.shop.vo.ShopVO;
import cn.rkylin.oms.system.unit.dao.IUnitDAO;
import cn.rkylin.oms.system.unit.domain.WF_ORG_UNIT;
import cn.rkylin.oms.system.user.dao.IUserDAO;
import cn.rkylin.oms.system.user.domain.WF_ORG_USER;
import cn.rkylin.oms.system.user.service.IUserService;
import cn.rkylin.oms.system.user.vo.UserVO;

@Service("roleService")
public class RoleServiceImple extends ApolloService implements IRoleService{
	@Autowired
	private IRoleDAO iroleDAO;
	@Autowired
	private IUnitDAO iunitDAO;
	@Autowired
	private IUserDAO iuserDAO;
	@Autowired
	private IMenuDAO imenuDAO;
	
	public PageInfo<RoleVo> findByWhere(int page, int rows, RoleVo roleVo) throws Exception{
		PageInfo<RoleVo> roleVOList = findPage(page, rows, "getRoleByCondition", roleVo);
		
		return roleVOList;
		
		
	}

	@Override
	public WF_ORG_ROLE getRoleDetail(String roleID) throws Exception {
		// TODO Auto-generated method stub
		return null;
	}


	
	
	
//	public List getRoleByCondition(WF_ORG_ROLE unitParam, int page, int rows) throws Exception {
//		List resultList = new ArrayList();
//		try {
//			resultList = iroleDAO.getRoleByCondition(unitParam,page, rows);
//		} catch (Exception e) {
//			throw new Exception(e.getMessage());
//		} 
//		return resultList;
//	}
//	
//	
//	public List getAllRoles(WF_ORG_ROLE roleVO) throws Exception {
//		List returnList = new ArrayList();
//		try {
//			returnList = iroleDAO.getAllRoles(roleVO);
//		} catch (Exception e) {
//			throw new Exception(e.getMessage());
//		}
//		return returnList;
//	}
//	
//	public int getRoleCount(WF_ORG_ROLE roleParam) throws Exception {
//		int roleCount = 0;
//		try {
//			roleCount = iroleDAO.getRoleCount(roleParam);
//		} catch (Exception e) {
//			throw new Exception(e.getMessage());
//		} 
//		return roleCount;
//	}
//	
//
//	public WF_ORG_ROLE getAllRoles(String roleID) throws Exception {
//		WF_ORG_ROLE returnRole = null;
//
//		try {
//			// 取role信息
//			WF_ORG_ROLE roleParam = new WF_ORG_ROLE();
//			roleParam.setRoleId(roleID);
//			List roleList = iroleDAO.getRoleByCondition(roleParam, 0, 0);
//			if (roleList != null || roleList.size() > 0) {
//				returnRole = (WF_ORG_ROLE) roleList.get(0);
//
//				// 取role可管理的组织单元
//				WF_ORG_UNIT unitParam = new WF_ORG_UNIT();
//				unitParam.setRoleId(roleID);
//				List unitList = new ArrayList();
//				unitList = iunitDAO.getUnitByCondition(unitParam);
//				returnRole.setRoleManageUnitList(unitList);
//
//				// 取role下的所有人
//				WF_ORG_USER userParam = new WF_ORG_USER();
//				userParam.setRoleId(roleID);
//				
//				List<WF_ORG_USER> roleList1 = new ArrayList<WF_ORG_USER>();
//			//------------------------------------------------------
//				List userList = iuserDAO.getUserByCondition(null);
//				returnRole.setRoleUsersList(userList);
//			} else {
//				returnRole = null;
//			}
//
//		} catch (Exception e) {
//			throw new Exception(e.getMessage());
//		} 
//		return returnRole;
//	}
//
//	public WF_ORG_ROLE getRoleDetail(String roleID) throws Exception {
//		WF_ORG_ROLE returnRole = null;
//
//		try {
//			// 取role信息
//			WF_ORG_ROLE roleParam = new WF_ORG_ROLE();
//			roleParam.setRoleId(roleID);
//			List roleList = iroleDAO.getRoleByCondition(roleParam, 0, 0);
//			if (roleList != null || roleList.size() > 0) {
//				returnRole = (WF_ORG_ROLE) roleList.get(0);
//
//				// 取role可管理的组织单元
//				WF_ORG_UNIT unitParam = new WF_ORG_UNIT();
//				unitParam.setRoleId(roleID);
//				List unitList = new ArrayList();
//				unitList = iunitDAO.getUnitByCondition(unitParam);
//				returnRole.setRoleManageUnitList(unitList);
//
//				// 取role下的所有人
//				WF_ORG_USER userParam = new WF_ORG_USER();
//				userParam.setRoleId(roleID);
//				List userList = iuserDAO.getUserByCondition(null);
//				returnRole.setRoleUsersList(userList);
//			} else {
//				returnRole = null;
//			}
//
//		} catch (Exception e) {
//			throw new Exception(e.getMessage());
//		} 
//		return returnRole;
//	}
//
//

	
}
